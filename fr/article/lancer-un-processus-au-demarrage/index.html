<!doctype html>
<html class="no-js" lang="fr">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="author" content="Arthur">
        <meta name="description" content="Arthur Knowledge Base">
        <meta name="keywords" content="personal, knowledge base, dynamic, responsive, code, tech">
        <meta name="generator" content="Hugo 0.44" />
        <title> Lancer Un Processus Au Démarrage | Arthur Knowledge Base</title>
        <meta name="description" content="Lancer Un Processus Au Démarrage - Arthur Knowledge Base">
        <meta itemprop="name" content="Lancer Un Processus Au Démarrage">
        <meta itemprop="description" content="Lancer Un Processus Au Démarrage - Arthur Knowledge Base">
        <meta property="og:title" content="Lancer Un Processus Au Démarrage">
        <meta property="og:description" content="Lancer Un Processus Au Démarrage - Arthur Knowledge Base">
        <meta property="og:image" content="https://www.gravatar.com/avatar/d41d8cd98f00b204e9800998ecf8427e?size=200">
        <meta property="og:url" content="https://kb.api-d.com/fr/article/lancer-un-processus-au-demarrage/">
        <meta property="og:site_name" content="Arthur Knowledge Base">
        <meta property="og:type" content="article">
        <link rel="icon" type="image/png" href="https://kb.api-d.com/favicon-32x32.png" sizes="32x32">
        <link rel="icon" type="image/png" href="https://kb.api-d.com/favicon-16x16.png" sizes="16x16">

	

        <link rel="stylesheet" href="https://kb.api-d.com/dist/theme.css">

        

        
            
                <link rel="stylesheet" href="https://kb.api-d.com/css/variables.css">
            
        
    </head>
    <body class="bilberry-hugo-theme">
        
<nav>

    <div class="container">
        <ul class="topnav">
            
                
                    <li><a href="/fr/page/about/">A propos de moi</a></li>
                
            
        </ul>

        
    </div>
</nav>


        <header>
    <div class="container">
        <div class="logo">
            <a href="/fr" class="logo">
                
                    <img src="/fr/img/profile.png" alt="">
                

                <span class="overlay"><i class="fa fa-home"></i></span>
            </a>
        </div>
        <div class="titles">
            <h3 class="title"><a href="/fr">Arthur Knowledge Base</a></h3>
            
                <span class="subtitle">Mémoire, Tutorials, Bouts de code et bien plus</span>
            
        </div>

    <div class="languages">
                
                    
                        <a href="/fr" class="active">fr</a>
                    
                
                    
                        <a href="/en">en</a>
                    
                
            </div>
        

        
        <div class="toggler">
        
            <i class="fa fa-bars" aria-hidden="true"></i>
        </div>
    </div>
</header>


        <div class="main container">
            
     
    <div class="article-wrapper u-cf single">
        
            <a class="bubble" href="/fr/article/lancer-un-processus-au-demarrage/">
    <i class="fa fa-fw fa-pencil"></i>
</a>

<article class="default article">
    

    <div class="content">
    <h3><a href="/fr/article/lancer-un-processus-au-demarrage/">Lancer Un Processus Au Démarrage</a></h3>
    <div class="meta">
        
            <span class="date moment">2018-06-13</span>
        

        
            <span class="categories">
                
                    <a href="/fr/categories/linux">Linux</a>
                
            </span>
        

        
    </div>

    
        <p>Il est parfois utile de lancer un processus lorsqu&rsquo;un serveur ou qu&rsquo;un ordinateur linux démarre.
Sur Mac OS, c&rsquo;est plutot simple, il suffit de cliquer sur le processus dans le dock.
Malheureusement, sous linux, avec une console, c&rsquo;est tout de suite plus compliqué&hellip;
</p>


<script
        src="https://code.jquery.com/jquery-3.3.1.min.js"
        integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous">
</script>

<link rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">

<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>

<link rel="stylesheet" href="/css/variables.css">

<script>
    $( document ).ready(function() {

        $(".variable_box").each(function() {
            add_spans_in_variable_box($(this)[0]);
        });

        const inputs = $("#params input");

        
        inputs.each(function() {
            const value = $(this).val();
            const name = $(this).attr("name");
            update_variables(name, value)
        });


        
        inputs.keyup(function() {
            const value = $(this).val();
            const name = $(this).attr("name");
            update_variables(name, value)
        });

    });

    function update_variables(name, value) {
        
        $('.variable').filter('[data-macro="' + name +'"]').each(
            function( index ) {

                if ($(this).hasClass("code")) {
                    hljs.highlightBlock($(this));
                }

                
                $(this).text(value);


            }
        )
    }

    function add_spans_in_variable_box(box) {
        const inputs = $("#params input");
        

        inputs.each(function() {
            const value = $(this).val();
            const name = $(this).attr("name");

            

            const by = '<span data-macro="' + name + '" class="variable">' + value + '</span>';
            
            const before = box.innerHTML;
            const after = before.split("§§" + name + "§§").join(by);
            

            box.innerHTML = after;
        })
    }




</script>

<h2>Personalisez l&#39;article</h2>
<form id="params" name="params" target="" method="GET">
    

<div class="question">
    <input type="text" value="mon_programme" name="name"><br>
    <label for="name">Nom du programme, doit être unique sur votre système, et permet de reconnaitre le processus lancé</label>
</div>
<div class="question">
    <input type="text" value="/home/$USER/start.sh" name="cmd"><br>
    <label for="cmd">Commande de lancement du programme</label>
</div>
<div class="question">
    <input type="text" value="$USER" name="user"><br>
    <label for="user">(facultatif) Utilisateur devant lancer la commande</label>
</div>


    <span style="text-align: right; font-size: 8px; float:right">Les valeurs ne sont pas sauvegardées, rafraichissez la page pour réinitialiser le formulaire</span>
</form>
<br>


<h2 id="méthode-1-utiliser-votre-crontab">Méthode 1 : Utiliser votre crontab</h2>

<h3 id="avantages-de-la-méthode">Avantages de la méthode</h3>

<ul>
<li>Simple à configurer</li>
<li>Lance un programme en votre nom</li>
</ul>

<h3 id="points-à-considèrer">Points à considèrer</h3>

<ul>
<li>Impossible de voir/intéragir avec la console</li>
<li>Si votre programme affiche des choses, elles vous seront envoyées par mail local</li>
</ul>

<h3 id="comment-l-utiliser">Comment l&rsquo;utiliser</h3>

<p>Ouvrez votre crontab avec <code class="variable_box bash">crontab -e</code>
puis ajoutez la ligne suivante :</p>


<pre><code class="variable_box cron" style="overflow: auto">@reboot §§cmd§§</code></pre>

<h2 id="méthode-2-utiliser-la-crontab-du-systeme">Méthode 2 : Utiliser la crontab du systeme</h2>

<h3 id="avantages-de-la-méthode-1">Avantages de la méthode</h3>

<ul>
<li>Simple à configurer</li>
<li>Lance un programme en tant qu&rsquo;un autre utilisateur</li>
</ul>

<h3 id="points-à-considèrer-1">Points à considèrer</h3>

<ul>
<li>Impossible de voir/intéragir avec la console</li>
<li>Nécéssite d&rsquo;être root pour écrire dans la crontab systeme.</li>
</ul>

<h3 id="comment-l-utiliser-1">Comment l&rsquo;utiliser</h3>

<p>Ouvrez la crontab avec votre éditeur favori: <code class="variable_box bash">sudo nano /etc/crontab</code></p>

<p>puis ajoutez la ligne suivante :</p>


<pre><code class="variable_box cron" style="overflow: auto">@reboot §§user§§ §§cmd§§</code></pre>

<h2 id="méthode-3-utiliser-systemd">Méthode 3 : Utiliser systemd</h2>

<h3 id="avantages-de-la-méthode-2">Avantages de la méthode</h3>

<ul>
<li>Extrèmement configurable</li>
<li>Lance un programme en tant qu&rsquo;un autre utilisateur</li>
<li>Permet de simplifier les scripts de lancement en prennant en compte le re-lancement,
la vérification de certaines conditions, le changement de répertoire, et bien plus</li>
</ul>

<h3 id="points-à-considèrer-2">Points à considèrer</h3>

<ul>
<li>Impossible de voir/intéragir avec la console</li>
<li>Nécéssite d&rsquo;être root pour écrire dans la crontab systeme.</li>
<li>Plus complexe à configurer</li>
</ul>

<h3 id="comment-l-utiliser-2">Comment l&rsquo;utiliser</h3>

<p>Creez et ouvrez le fichier service dans votre éditeur favori : <code class="variable_box bash">sudo nano /etc/systemd/system/§§name§§.service</code></p>

<p>Ajoutez les lignes suivantes :</p>


<pre><code class="variable_box systemd" style="overflow: auto"># Ceci est un service systemd basique crée à l&#39;aide de 
# kb.api-d.com/posts/lancer-un-processus-au-demarrage

# Pour en savoir plus sur les options disponibles
# la documentation est disponible ici :
# https://www.freedesktop.org/software/systemd/man/systemd.unit.html#%5BUnit%5D%20Section%20Options

[Unit]
After=network.target
Description=Lancement au démarrage de §§name§§
# Vérifier qu&#39;un répertoire existe au démarrage
#AssertPathExists=/what/ever
[Service]

# Un service simple
# Forking si la commande/le script invoque un screen, par exemple
Type=simple

# Commande de démarrage
# Doit etre un PATH absolu vers un script.
# Peut commencer par /bin/bash
ExecStart=§§cmd§§

# Commande d&#39;arret, si nécéssaire
#ExecStop=§§cmd§§ stop

# Répertoire de travail du service, si nécéssaire
WorkingDirectory=/home/§§user§§

# Utilisateur et groupe
User=§§user§§
Group=§§user§§

# Redémarrage en cas de plantage
# ou always, on-abort, etc
Restart=on-failure 

# Temps avant lequel le service sera tué lors d&#39;une commande stop si celle-ci ne réponds pas
TimeoutStopSec=300

# Valeur de nice du service
#Nice=5

[Install]
WantedBy=multi-user.target</code></pre>

<p>N&rsquo;oubliez pas de rendre votre script exécutable:</p>


<pre><code class="variable_box bash" style="overflow: auto">chmod 744 /etc/systemd/system/§§name§§.service</code></pre>

<p>Enfin, préparez et lancez votre service:</p>


<pre><code class="variable_box bash" style="overflow: auto">systemctl daemon-reload
systemctl enable §§name§§.service</code></pre>

<p>Pour lancer votre service immédiatement, tapez :</p>


<pre><code class="variable_box bash" style="overflow: auto">systemctl start §§name§§.service</code></pre>

<h2 id="informations-supplémentaires">Informations supplémentaires</h2>

<link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet">
      
<style type="text/css">

.alert {
  min-width: 150px;
  padding: 15px;
  margin-bottom: 20px;
  border: 1px solid transparent;
  border-radius: 3px;
}
.alert-success {
  background-color: #91cf91;
  border-color: #80c780;
  color: #3d8b3d;
}

.alert p {
  padding: 0;
  margin: 0;
}
.alert i {
  padding-right: 5px;
  vertical-align: middle;
  font-size: 24px;
}

.shadow-1, .alert {
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);
}

.shadow-2, .alert:hover {
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);
}
</style>

<div class="alert alert-success" role="alert">
  <i class="material-icons">info</i>
  Il est plutôt simple de pouvoir voir et intéragir avec 
la console du service si cela est utile dans votre cas,
en lancant le programme dans un screen
</div>

<p>Pour cela, utilisez la commande suivante:</p>


<pre><code class="variable_box bash" style="overflow: auto"># Le exec bash permet de garder le screen vivant.
/usr/bin/screen -dmS §§name§§ bash -c &#39;§§cmd§§; exec bash&#39;</code></pre>

<p>Et, si l&rsquo;on veut une boucle, par exemple dans le cas de la crontab :</p>


<pre><code class="variable_box bash" style="overflow: auto">/usr/bin/screen -dmS §§name§§ bash -c &#39;while true; do §§cmd§§; sleep 5; done; exec bash&#39;</code></pre>
    
</div>

    
<div class="footer no-tags">


    

    
</div>

</article>

        
    </div>

    
        
    

     

        </div>

        
<footer>
    <div class="container">

        
        <div class="recent-posts">
            <strong>Derniers articles</strong>
                <ul>
                
                    <li>
                        <a href="/fr/article/ouvrir-ports-et-ip-statique-en-4g/ouvrir-ports-et-ip-statique-en-4g/">Ouvrir ports et obtenir une IP statique en 4G</a>
                    </li>
                
                    <li>
                        <a href="/fr/article/creer-un-serveur-tf2/">Creer un serveur TF2</a>
                    </li>
                
                    <li>
                        <a href="/fr/code/duckhunt-how-to/">Comment installer DuckHunt et DuckHunt Community sur votre propre serveur</a>
                    </li>
                
                    <li>
                        <a href="/fr/code/duckenigma-how-to/">Comment installer et creer des énigmes pour un fork de DuckEnigma</a>
                    </li>
                
                    <li>
                        <a href="/fr/article/lancer-un-processus-au-demarrage/">Lancer Un Processus Au Démarrage</a>
                    </li>
                
                    <li>
                        <a href="/fr/article/voir-la-date-dexpiration-du-certificat-dun-site-web-en-ligne-de-commande/">Voir la date d’expiration du certificat d’un site web en ligne de commande</a>
                    </li>
                
                    <li>
                        <a href="/fr/article/reinitialiser-une-imprimante-a-distance/">Réinitialiser Une Imprimante À Distance</a>
                    </li>
                
                </ul>
        </div>
        

        
        <div class="categories">
            <a href="/fr/categories/"><strong>Catégories</strong></a>
                <ul>
                
                    <li>
                        <a href="/fr/categories/linux">Linux (10)</a>
                    </li>
                
                    <li>
                        <a href="/fr/categories/mac-os">Mac os (6)</a>
                    </li>
                
                    <li>
                        <a href="/fr/categories/terminal">Terminal (5)</a>
                    </li>
                
                    <li>
                        <a href="/fr/categories/tutoriels">Tutoriels (3)</a>
                    </li>
                
                    <li>
                        <a href="/fr/categories/routeur-4g">Routeur 4g (1)</a>
                    </li>
                
                    <li>
                        <a href="/fr/categories/r%C3%A9seau">Réseau (1)</a>
                    </li>
                
                    <li>
                        <a href="/fr/categories/serveur">Serveur (1)</a>
                    </li>
                
            </ul>
        </div>
        

        <div class="right">
            
            <div class="external-profiles">
                <strong>Des médias sociaux</strong>

                
                
                
                
                
                
                
                
                
                
                    <a href="https://github.com/paris-ci" target="_blank"><i class="fa fa-github"></i></a>
                
                
            </div>
            

            <div class="languages">
                    <strong>Autres langues</strong>
                    
                        
                            <a href="/fr" class="active">fr</a>
                        
                    
                        
                            <a href="/en">en</a>
                        
                    
                </div>
            
        </div>
    </div>
</footer>


<div class="credits">
    <div class="container">
        <div class="copyright">
            <a href="https://github.com/paris-ci" target="_blank">
                &copy;
                
                    2021
                
                by Arthur
            </a>
	    -
	    
        </div>
        <div class="author">
            <a href="https://github.com/paris-ci/knowledge" target="_blank">Arthur KB</a>
        </div>
    </div>
</div>


        

        
        
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [['$','$'], ['\\(','\\)']]}
        });
</script>

        

        <script src="https://kb.api-d.com/dist/theme.js" type="application/javascript"></script>

        
            
        

        <script>
            $(document).ready(function() {
                $(".moment").each(function() {
                    $(this).text(
                        moment( $(this).text() )
                            .locale( "fr" )
                            .format('LL')
                    );
                });

                $(".footnote-return sup").html("[revenir]")
            })
        </script>

        


    </body>
</html>
